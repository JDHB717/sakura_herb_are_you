(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6178a803"],{"159b":function(e,t,s){var r=s("da84"),n=s("fdbc"),a=s("785a"),o=s("17c2"),i=s("9112"),c=function(e){if(e&&e.forEach!==o)try{i(e,"forEach",o)}catch(t){e.forEach=o}};for(var l in n)n[l]&&c(r[l]&&r[l].prototype);c(a)},"17c2":function(e,t,s){"use strict";var r=s("b727").forEach,n=s("a640"),a=n("forEach");e.exports=a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1c73":function(e,t,s){"use strict";var r=s("7a23"),n={key:0,class:"p-0 m-0"};function a(e,t,s,a,o,i){return 0!==e.errorMessages.length?(Object(r["s"])(),Object(r["g"])("div",n,[(Object(r["s"])(!0),Object(r["g"])(r["a"],null,Object(r["y"])(e.errorMessages,(function(e,t){return Object(r["s"])(),Object(r["g"])("p",{key:t,class:"text-danger p-0 m-0"},Object(r["C"])(e),1)})),128))])):Object(r["f"])("",!0)}var o=Object(r["k"])({props:{errorMessages:{type:Array,default:[],required:!1}}}),i=s("d959"),c=s.n(i);const l=c()(o,[["render",a]]);t["a"]=l},2162:function(e,t,s){},"46cf":function(e,t,s){},"8a99":function(e,t,s){"use strict";var r=s("7a23"),n={id:""};function a(e,t,s,a,o,i){var c=Object(r["A"])("ErrorMessage");return Object(r["s"])(),Object(r["g"])("div",n,[Object(r["h"])("div",null,[e.inputFileFlg?(Object(r["s"])(),Object(r["g"])("input",{key:0,type:"file",id:"file",onChange:t[0]||(t[0]=function(){return e.uploadToS3&&e.uploadToS3.apply(e,arguments)})},null,32)):Object(r["f"])("",!0)]),Object(r["j"])(c,{message:e.message},null,8,["message"])])}var o=s("1da1"),i=(s("96cf"),s("b0c0"),s("b32d")),c=s("bc3a"),l=s.n(c),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(i["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","upload-files/getPreSignedUrl"),method:"post",params:{file_name:e,file_path:t}})},b=function(e){return Object(i["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","upload-files/confirm"),method:"post",params:{hash:e}})},d=function(e,t){var s={"Content-Type":t.type};return l.a.put(e,t,{headers:s}).then((function(e){return{success:!0}})).catch((function(e){return console.log(e.status),{success:!1}}))},h=s("8e27"),p=Object(r["k"])({name:"UploadFile",layout:"base",components:{ErrorMessage:h["a"]},props:{filePath:{type:String,required:!1}},data:function(){return{message:"",inputFileFlg:!0}},methods:{resetMessage:function(){this.message=""},setInputFileEmpty:function(){this.inputFileFlg=!1,this.$nextTick((function(){this.inputFileFlg=!0}))},uploadToS3:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.message="",console.log("uploaded files",t.target.files),s=t.target.files[0],e.next=5,u(s.name,this.filePath);case 5:if(r=e.sent,console.log(r),r.success){e.next=10;break}return this.message="アップロードに失敗しました",e.abrupt("return");case 10:return console.log("url:",r.data.pre_signed_url),e.next=13,d(r.data.pre_signed_url,s);case 13:if(n=e.sent,console.log("success"),n.success){e.next=18;break}return this.message="アップロードに失敗しました",e.abrupt("return");case 18:return e.next=20,b(r.data.hash);case 20:if(a=e.sent,a.success){e.next=24;break}return this.message="アップロードに失敗しました",e.abrupt("return");case 24:this.setInputFileEmpty(),this.$emit("uploadedFile",a.data);case 26:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){}}),f=s("d959"),m=s.n(f);const j=m()(p,[["render",a]]);t["a"]=j},"8e27":function(e,t,s){"use strict";var r=s("7a23"),n={class:"mb-3 mt-4 mp-0 w-75"},a={key:0,class:"text-danger"};function o(e,t,s,o,i,c){return Object(r["s"])(),Object(r["g"])("div",n,[e.message?(Object(r["s"])(),Object(r["g"])("p",a,Object(r["C"])(e.message),1)):Object(r["f"])("",!0)])}var i=Object(r["k"])({name:"ErrorMessage",props:{message:{type:String,required:!0}}}),c=s("d959"),l=s.n(c);const u=l()(i,[["render",o]]);t["a"]=u},"99af":function(e,t,s){"use strict";var r=s("23e7"),n=s("da84"),a=s("d039"),o=s("e8b5"),i=s("861d"),c=s("7b0b"),l=s("07fa"),u=s("8418"),b=s("65f0"),d=s("1dde"),h=s("b622"),p=s("2d00"),f=h("isConcatSpreadable"),m=9007199254740991,j="Maximum allowed index exceeded",g=n.TypeError,O=p>=51||!a((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)},w=!O||!v;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,s,r,n,a,o=c(this),i=b(o,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?o:arguments[t],y(a)){if(n=l(a),d+n>m)throw g(j);for(s=0;s<n;s++,d++)s in a&&u(i,d,a[s])}else{if(d>=m)throw g(j);u(i,d++,a)}return i.length=d,i}})},b241:function(e,t,s){"use strict";s("2162")},bb20:function(e,t,s){"use strict";s("46cf")},bec1:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return c}));s("99af");var r=s("b32d"),n=function(){return Object(r["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","therapist-blogs"),method:"get"})},a=function(e){return Object(r["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","therapist-blogs/").concat(e),method:"get"})},o=function(e){return Object(r["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","therapist-blogs"),method:"post",data:e})},i=function(e,t){return Object(r["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","therapist-blogs/").concat(e),method:"put",data:t})},c=function(e){return Object(r["a"])({url:"".concat("http://localhost:8000/api/admin/v1/","therapist-blogs/").concat(e),method:"delete"})}},e696:function(e,t,s){"use strict";s.r(t);s("b0c0");var r=s("7a23"),n=Object(r["h"])("h2",{class:"mb-3"},"ブログ更新",-1),a={key:0,id:"app"},o={class:"table table-striped"},i=Object(r["h"])("th",null,"タイトル",-1),c={class:"py-2"},l=Object(r["h"])("th",null,"セラピスト名",-1),u={class:"py-2"},b=Object(r["h"])("th",null,"内容",-1),d={class:"py-2"},h={class:"p-2"},p=Object(r["h"])("th",null,"画像",-1),f={class:"py-2"},m={key:0,style:{display:"flex",gap:"10px","overflow-x":"auto",width:"30rem"}},j=["src"],g=Object(r["h"])("th",null,"公開/非公開",-1),O={class:"py-2"},v=Object(r["h"])("option",{value:0},"非公開",-1),y=Object(r["h"])("option",{value:1},"公開",-1),w=[v,y],k={class:"d-flex justify-content-center"},x={class:"p-2"},E=["disabled"],_={class:"p-2"},M=["disabled"];function F(e,t,s,v,y,F){var U=Object(r["A"])("ErrorMessage"),C=Object(r["A"])("ValidateError"),D=Object(r["A"])("example-modal"),T=Object(r["A"])("UploadFile");return Object(r["s"])(),Object(r["g"])(r["a"],null,[n,Object(r["j"])(U,{message:e.message},null,8,["message"]),e.isShow?(Object(r["s"])(),Object(r["g"])("div",a,[Object(r["h"])("div",null,[Object(r["h"])("table",o,[Object(r["h"])("tr",null,[i,Object(r["h"])("td",c,[Object(r["L"])(Object(r["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.items.title=t})},null,512),[[r["H"],e.items.title]]),Object(r["j"])(C,{errorMessages:e.validateErrors.title},null,8,["errorMessages"])])]),Object(r["h"])("tr",null,[l,Object(r["h"])("td",u,Object(r["C"])(e.blog.therapist.name),1)]),Object(r["h"])("tr",null,[b,Object(r["h"])("td",d,[Object(r["h"])("div",h,[Object(r["L"])(Object(r["j"])(D,null,null,512),[[r["I"],e.showModal]]),Object(r["h"])("button",{type:"button",onClick:t[1]||(t[1]=function(){return e.showHyperlinkDialog&&e.showHyperlinkDialog.apply(e,arguments)})}," リンクを設定する ")]),Object(r["L"])(Object(r["h"])("textarea",{ref:"documenteditor",class:"form-control",rows:"",cols:"","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.items.body=t})},null,512),[[r["H"],e.items.body]]),Object(r["j"])(C,{errorMessages:e.validateErrors.body},null,8,["errorMessages"])])]),Object(r["h"])("tr",null,[p,Object(r["h"])("td",f,[Object(r["h"])("div",null,[Object(r["j"])(T,{onUploadedFile:e.setUploadFile},null,8,["onUploadedFile"])]),0!==e.items.upload_file_hashs.length?(Object(r["s"])(),Object(r["g"])("div",m,[(Object(r["s"])(!0),Object(r["g"])(r["a"],null,Object(r["y"])(e.imageUrls,(function(e){return Object(r["s"])(),Object(r["g"])("div",null,[Object(r["h"])("img",{src:e,width:"100",height:"100"},null,8,j)])})),256))])):Object(r["f"])("",!0),Object(r["j"])(C,{errorMessages:e.validateErrors["upload_file_hashs.0"]},null,8,["errorMessages"])])]),Object(r["h"])("tr",null,[g,Object(r["h"])("td",O,[Object(r["L"])(Object(r["h"])("select",{class:"form-select","aria-label":"","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.items.is_public=t})},w,512),[[r["G"],e.items.is_public]]),Object(r["j"])(C,{errorMessages:e.validateErrors.profile},null,8,["errorMessages"])])])]),Object(r["h"])("div",k,[Object(r["h"])("div",x,[Object(r["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=function(t){return e.update()}),disabled:e.submitDisable}," 編集する ",8,E)]),Object(r["h"])("div",_,[Object(r["h"])("button",{type:"button",class:"btn btn-danger",onClick:t[5]||(t[5]=function(t){return e.destroy()}),disabled:e.submitDisable}," 削除する ",8,M)])])])])):Object(r["f"])("",!0)],64)}var U=s("1da1"),C=(s("d3b7"),s("159b"),s("96cf"),s("8e27")),D=s("1c73"),T=s("bec1"),S=s("8a99"),$={class:"modal-backdrop"},R={class:"modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},A={class:"modal-header",id:"modalTitle"},H=Object(r["i"])(" This is the default tile! "),V={class:"modal-body",id:"modalDescription"},I=Object(r["i"])(" This is the default body! "),L={class:"modal-footer"},q=Object(r["i"])(" This is the default footer! ");function z(e,t,s,n,a,o){return Object(r["s"])(),Object(r["e"])(r["b"],{name:"modal-fade"},{default:Object(r["K"])((function(){return[Object(r["h"])("div",$,[Object(r["h"])("div",R,[Object(r["h"])("header",A,[Object(r["z"])(e.$slots,"header",{},(function(){return[H]})),Object(r["h"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return o.close&&o.close.apply(o,arguments)}),"aria-label":"Close modal"}," x ")]),Object(r["h"])("section",V,[Object(r["z"])(e.$slots,"body",{},(function(){return[I]}))]),Object(r["h"])("footer",L,[Object(r["z"])(e.$slots,"footer",{},(function(){return[q]})),Object(r["h"])("button",{type:"button",class:"btn-green",onClick:t[1]||(t[1]=function(){return o.close&&o.close.apply(o,arguments)}),"aria-label":"Close modal"}," Close me! ")])])])]})),_:3})}var P={name:"Modal",data:function(){return{showModal:!0}},methods:{close:function(){this.$emit("close")}}},B=(s("bb20"),s("d959")),J=s.n(B);const G=J()(P,[["render",z]]);var K=G,N=Object(r["k"])({name:"TherapistBlogUpdate",components:{ErrorMessage:C["a"],ValidateError:D["a"],UploadFile:S["a"],"example-modal":K},data:function(){return{isShow:!1,message:"",count:0,submitDisable:!1,validateErrors:{},items:{upload_file_hashs:[]},blog:{},imageUrls:[],open:!1,showModal:!1}},mounted:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["c"])(this.$route.params.id);case 2:if(t=e.sent,t.success){e.next=6;break}return this.commonError(t),e.abrupt("return");case 6:this.blog=t.data,this.init(),this.isShow=!0;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),provide:{},methods:{showHyperlinkDialog:function(){this.showModal=!this.showModal,alert(this.showModal)},commonError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;422===e.status&&(this.validateErrors=e.data),""!==e.message&&(this.message=e.message)},update:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.submitDisable=!0,e.next=3,Object(T["e"])(this.$route.params.id,this.items);case 3:if(t=e.sent,this.submitDisable=!1,t.success){e.next=8;break}return this.commonError(t),e.abrupt("return");case 8:alert("更新しました");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),init:function(){var e=this;this.items.title=this.blog.title,this.items.body=this.blog.body,this.items.is_public=this.blog.is_public;for(var t=0;t<this.blog.upload_files.length;t++)this.items.upload_file_hashs[t]=this.blog.upload_files[t].hash;console.log("image urls:",this.blog.upload_files),this.blog.upload_files.forEach((function(t,s){e.imageUrls[s]="https://content.herbareyou.jp/"+(null===t||void 0===t?void 0:t.file_path),console.log(e.imageUrls[s])}))},destroy:function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.confirm("本当に削除しますか？")){e.next=2;break}return e.abrupt("return");case 2:return this.submitDisable=!0,e.next=5,Object(T["a"])(this.$route.params.id);case 5:if(t=e.sent,this.submitDisable=!1,t.success){e.next=11;break}return this.commonError(t),this.submitDisable=!1,e.abrupt("return");case 11:alert("削除しました"),this.$router.push({name:"TherapistBlogIndex"});case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setUploadFile:function(e){console.log(e),this.items.upload_file_hashs[this.count]=e.hash,this.imageUrls[this.count]=e.url,console.log(this.imageUrls),this.count++}}});s("b241");const Q=J()(N,[["render",F]]);t["default"]=Q}}]);
//# sourceMappingURL=chunk-6178a803.d0581683.js.map